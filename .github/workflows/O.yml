name: O
on: 
  workflow_dispatch:
    
   
   
  pull_request:
    types: [synchronize]
    branches: 
    - develop
    - master
    - main
jobs: 

  build-test:
    
    if: |
       github.event.ref == 'refs/heads/main' 
    runs-on: ubuntu-latest
    steps:
      
    
      - run: |
              ls -ltr
              echo ${{ github.sha }}
              echo ${{ github.run_id }}
              echo ${{ github.run_number }}
              echo 'feature' > text1.txt
              ls -ltr
      - uses: actions/cache@v3
        with:
          path: ./*
          key: "${{github.sha}}-test"
  build-prod:
    needs: build-test
    if: |
       github.event.ref == 'refs/heads/main' 
    runs-on: ubuntu-latest
    steps:
      
      - uses: actions/cache@v3
        with:
          path: ./*
          key: ${{github.sha}}
          
      - run: |
            echo 'prod' > text2.txt
            ls -ltr
      - uses: actions/cache@v3
        with:
          path: ./*
          key: ${{github.run_id}}
  build:
    needs: build-prod
    if: |
       github.event.ref == 'refs/heads/main' 
    runs-on: ubuntu-latest
    steps:
      
      - uses: actions/cache@v3
        with:
          path: ./*
          key: ${{github.run_id}}
      - run: ls -ltr
      - run: cat text1.txt
      - run: cat text2.txt
  build-me:
    needs: build
    if: |
       github.event.ref == 'refs/heads/main' 
    runs-on: ubuntu-latest
    steps:
      
      - uses: actions/cache@v3
        with:
          path: ./*
          key: sub
      - run: ls -ltr
      
      
